<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funding Bot Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root{--primary-color:#00ddb3;--background-color:#0d1117;--surface-color:#161b22;--border-color:#30363d;--text-color:#c9d1d9;--text-secondary-color:#8b949e;--danger-color:#e5534b;--success-color:#28a745}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:var(--background-color);color:var(--text-color);display:flex;flex-direction:column;min-height:100vh;overflow-x:hidden}
        body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at top left,rgba(0,221,179,0.1),transparent 30%),radial-gradient(circle at bottom right,rgba(0,120,255,0.1),transparent 30%);z-index:-1;animation:gradient-pan 15s ease infinite alternate}
        @keyframes gradient-pan{0%{background-position:0% 0%}100%{background-position:100% 100%}}
        .container{width:90%;max-width:1200px;margin:0 auto;padding:20px;flex-grow:1;display:flex;flex-direction:column}
        header{display:flex;justify-content:space-between;align-items:center;padding-bottom:20px;border-bottom:1px solid var(--border-color)}
        .logo{font-size:1.8em;font-weight:bold;color:var(--primary-color);text-shadow:0 0 10px rgba(0,221,179,0.5)}
        .header-actions{display:none;align-items:center;gap:20px}
        .header-btn{background:none;border:none;color:var(--text-secondary-color);font-size:1.8em;cursor:pointer;transition:color .3s,transform .3s}
        .header-btn:hover{color:var(--primary-color)}
        #settings-btn:hover{transform:rotate(90deg)}
        #logout-btn:hover{color:var(--danger-color)}
        #vip-info-panel, #bot-status-panel{background-color:var(--surface-color);border:1px solid var(--border-color);border-radius:8px;padding:15px;margin-top:20px;display:none;flex-direction:column;gap:10px}
        .info-row{display:flex;justify-content:space-between;align-items:center;font-size:.95em}
        .info-row span{font-weight:bold;color:var(--primary-color)}
        #bot-status-panel { font-size: 1.1em; }
        #bot-status-panel .info-row span { color: #fff; }
        main{padding-top:30px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;text-align:center}
        .action-button{background-color:var(--surface-color);border:1px solid var(--border-color);color:var(--text-color);padding:12px;font-size:1.1em;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
        .action-button i{font-size:1.8em}
        .action-button:hover{border-color:var(--primary-color);transform:translateY(-4px);box-shadow:0 6px 15px rgba(0,221,179,0.1)}
        #start-btn{color:var(--success-color)}
        #start-btn.stop-state{color:var(--danger-color)}
        .vip-button{text-align:left;padding:15px}
        .vip-button h3{color:var(--primary-color);margin-bottom:5px}
        .vip-button p{color:var(--text-secondary-color);font-size:.9em}
        .popup{position:fixed;bottom:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:flex-end;z-index:1000;opacity:0;visibility:hidden;transition:opacity .4s,visibility .4s}
        .popup.active{opacity:1;visibility:visible}
        .popup-content{background-color:var(--surface-color);width:100%;max-width:600px;max-height:90vh;border-top-left-radius:20px;border-top-right-radius:20px;padding:20px;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .4s ease-out;border-top:1px solid var(--border-color)}
        .popup.active .popup-content{transform:translateY(0)}
        .popup-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:15px;margin-bottom:20px}
        .popup-header h2{font-size:1.4em}
        .popup-close-btn{background:none;border:none;font-size:1.8em;color:var(--text-secondary-color);cursor:pointer;transition:color .3s}
        .popup-close-btn:hover{color:var(--primary-color)}
        .popup-body{overflow-y:auto;flex-grow:1;padding-right:10px}
        .input-group{margin-bottom:15px}
        .input-group label{display:block;margin-bottom:5px;color:var(--text-secondary-color)}
        .input-group input{width:100%;padding:10px;background-color:var(--background-color);border:1px solid var(--border-color);border-radius:6px;color:var(--text-color);font-size:1em}
        .submit-btn{background-color:var(--primary-color);color:var(--background-color);border:none;padding:12px;width:100%;border-radius:8px;font-size:1.1em;font-weight:bold;cursor:pointer;margin-top:15px;transition:background-color .3s}
        .submit-btn:hover{background-color:#00b894}
        #start-options-form .radio-group{display:flex;gap:20px;margin-bottom:20px}
        #start-options-form .radio-control{display:flex;align-items:center;gap:8px;cursor:pointer}
        #start-options-form input[type=radio]{width:auto}
        .history-table{width:100%;border-collapse:collapse}
        .history-table th,.history-table td{padding:10px;text-align:left;border-bottom:1px solid var(--border-color);font-size:.9em}
        .history-table th{color:var(--text-secondary-color)}
        .pnl-positive{color:var(--success-color)}
        .pnl-negative{color:var(--danger-color)}
        .auth-form { padding: 20px; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--surface-color); }
        .auth-form h2 { text-align: center; }
        .auth-form p { margin-top: 15px; text-align: center; }
        .auth-form a { color: var(--primary-color); }
    </style>
</head>
<body>
    <div id="app-container" style="display: none;">
        <div class="container">
            <header>
                <div class="logo">FUNDING BOT</div>
                <div class="header-actions">
                    <button id="settings-btn" class="header-btn" title="Cài đặt"><i class="fas fa-cog"></i></button>
                    <button id="logout-btn" class="header-btn" title="Đăng xuất"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </header>
            <div id="vip-info-panel">
                <div class="info-row">
                    <div>User: <span id="vip-user"></span></div>
                    <div>PNL Tổng: <span id="vip-pnl">0.00</span></div>
                </div>
                <div class="info-row">
                    <div>Time used: <span id="vip-time"></span></div>
                    <div>Trạng thái VIP: <span id="vip-level"></span></div>
                </div>
            </div>
            <div id="bot-status-panel">
                <div class="info-row">
                    <div>Trạng thái Bot: <span id="bot-logic-state">STOPPED</span></div>
                    <div>Hành động: <span id="bot-capital-state">IDLE</span></div>
                </div>
                <div id="current-trade-info" style="margin-top: 10px; color: var(--primary-color);"></div>
            </div>
            <main id="main-content"></main>
        </div>
    </div>
    <div id="auth-page">
        <div class="container" style="max-width: 420px; margin-top: 60px;">
            <div class="logo" style="text-align: center; padding-bottom: 40px;">BOT LOGIN</div>
            <form id="login-form" class="auth-form">
                <h2>Login</h2>
                <div class="input-group"><label for="login-username">Username</label><input type="text" id="login-username" required></div>
                <div class="input-group"><label for="login-password">Password</label><input type="password" id="login-password" required></div>
                <button type="submit" class="submit-btn">Login</button>
                <p>Don't have an account? <a href="#" id="show-register">Register</a></p>
            </form>
            <form id="register-form" class="auth-form" style="display: none;">
                <h2>Register</h2>
                <div class="input-group"><label for="register-username">Username</label><input type="text" id="register-username" required></div>
                <div class="input-group"><label for="register-password">Password</label><input type="password" id="register-password" required></div>
                <button type="submit" class="submit-btn">Register</button>
                <p>Already have an account? <a href="#" id="show-login">Login</a></p>
            </form>
        </div>
    </div>
    <div class="popup" id="settings-popup">
        <div class="popup-content">
            <div class="popup-header"><h2>Cài đặt</h2><button class="popup-close-btn">&times;</button></div>
            <div class="popup-body">
                <form id="settings-form">
                    <h4><i class="fas fa-key"></i> Binance</h4>
                    <div class="input-group"><label>API Key</label><input type="text" name="binance_apikey"></div>
                    <div class="input-group"><label>Secret Key</label><input type="password" name="binance_secret"></div>
                    <h4><i class="fas fa-key"></i> Bitget</h4>
                    <div class="input-group"><label>API Key</label><input type="text" name="bitget_apikey"></div>
                    <div class="input-group"><label>Secret Key</label><input type="password" name="bitget_secret"></div>
                    <div class="input-group"><label>Password</label><input type="password" name="bitget_password"></div>
                    <h4><i class="fas fa-key"></i> KuCoin</h4>
                    <div class="input-group"><label>API Key</label><input type="text" name="kucoin_apikey"></div>
                    <div class="input-group"><label>Secret Key</label><input type="password" name="kucoin_secret"></div>
                    <div class="input-group"><label>Password</label><input type="password" name="kucoin_password"></div>
                    <hr style="margin: 20px 0;">
                    <h3><i class="fas fa-wallet"></i> Wallet Addresses</h3>
                    <h4>Binance</h4>
                    <div class="input-group"><label>BEP20</label><input type="text" name="binance_bep20"></div>
                    <div class="input-group"><label>APTOS</label><input type="text" name="binance_aptos"></div>
                    <h4>Bitget</h4>
                    <div class="input-group"><label>BEP20</label><input type="text" name="bitget_bep20"></div>
                    <div class="input-group"><label>APTOS</label><input type="text" name="bitget_aptos"></div>
                    <h4>KuCoin</h4>
                    <div class="input-group"><label>APTOS</label><input type="text" name="kucoin_aptos"></div>
                    <button type="submit" class="submit-btn">Lưu Cài Đặt</button>
                </form>
            </div>
        </div>
    </div>
    <div class="popup" id="start-options-popup">
        <div class="popup-content">
            <div class="popup-header"><h2>Start Bot Options</h2><button class="popup-close-btn">&times;</button></div>
            <div class="popup-body">
                <form id="start-options-form">
                    <div class="radio-group">
                        <label class="radio-control"><input type="radio" name="margin-type" value="usdt" checked> USDT</label>
                        <label class="radio-control"><input type="radio" name="margin-type" value="percent"> % USDT</label>
                    </div>
                    <div class="input-group">
                        <label for="margin-value">Margin Value</label>
                        <input type="number" id="margin-value" name="margin-value" placeholder="Nhập số tiền hoặc %" required>
                    </div>
                    <button type="submit" class="submit-btn">Start</button>
                </form>
            </div>
        </div>
    </div>
    <div class="popup" id="history-popup"><div class="popup-content"><div class="popup-header"><h2 id="history-title"></h2><button class="popup-close-btn">&times;</button></div><div class="popup-body"><table class="history-table"><thead id="history-table-head"></thead><tbody id="history-table-body"></tbody></table></div></div></div>
    <script src="script.js"></script>
</body>
</html>
